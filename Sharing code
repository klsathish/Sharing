public async Task<List<APIRequestResults>> GetAPIRequestLog(DateFilter model)
{
    return await _dbContext.APIRequestResults
        .FromSqlRaw(
            @"EXEC [dbo].[SP_GetAPIRequestLog]
                @FromDate = @FromDate,
                @ToDate = @ToDate",
            new SqlParameter("@FromDate", model.FromDate),
            new SqlParameter("@ToDate", model.ToDate)
        )
        .AsNoTracking()
        .ToListAsync();
}

public async Task<string> InsertAPIRequestLogsAndPerformanceLogs(
    ApiRequestAndPerformanceLogRequest apiRequestAndPerformanceLogRequest,
    ApiRequestAndPerformanceLogModel apiRequestAndPerformanceLogModel)
{
    var apiRequestLog = await _dbContext.Database.ExecuteSqlRawAsync(
        @"EXEC [dbo].[SP_Insert_Update_APIRequestLog]
            @ApiEndPoint = @ApiEndPoint,
            @AppModuleMappingID = @AppModuleMappingID,
            @CreatedBy = @CreatedBy,
            @Duration = @Duration,
            @HttpMethod = @HttpMethod,
            @LayerID = @LayerID,
            @SessionID = @SessionID,
            @StatusCode = @StatusCode,
            @UserID = @UserID,
            @RequestBody = @RequestBody,
            @RequestLogID = @RequestLogID,
            @RequestTimeStamp = @RequestTimeStamp,
            @ResponseBody = @ResponseBody,
            @ResponseTimeStamp = @ResponseTimeStamp,
            @RoleID = @RoleID",
        new SqlParameter("@ApiEndPoint", apiRequestAndPerformanceLogRequest.ApiEndPoint),
        new SqlParameter("@AppModuleMappingID", apiRequestAndPerformanceLogRequest.AppModuleMappingID),
        new SqlParameter("@CreatedBy", apiRequestAndPerformanceLogModel.CreatedBy),
        new SqlParameter("@Duration", apiRequestAndPerformanceLogModel.Duration),
        new SqlParameter("@HttpMethod", apiRequestAndPerformanceLogRequest.HttpMethod),
        new SqlParameter("@LayerID", apiRequestAndPerformanceLogRequest.LayerID),
        new SqlParameter("@SessionID", apiRequestAndPerformanceLogModel.SessionID),
        new SqlParameter("@StatusCode", apiRequestAndPerformanceLogRequest.StatusCode),
        new SqlParameter("@UserID", apiRequestAndPerformanceLogModel.UserID),
        new SqlParameter("@RequestBody", apiRequestAndPerformanceLogRequest.RequestBody ?? (object)DBNull.Value),
        new SqlParameter("@RequestLogID", 0),
        new SqlParameter("@RequestTimeStamp", apiRequestAndPerformanceLogRequest.RequestTimeStamp),
        new SqlParameter("@ResponseBody", apiRequestAndPerformanceLogRequest.ResponseBody ?? (object)DBNull.Value),
        new SqlParameter("@ResponseTimeStamp", apiRequestAndPerformanceLogRequest.ResponseTimeStamp),
        new SqlParameter("@RoleID", apiRequestAndPerformanceLogModel.RoleID)
    );

    if (apiRequestLog == 0)
        return SabicConstants.BadRequestMessage;

    var performanceLog = await _dbContext.Database.ExecuteSqlRawAsync(
        @"EXEC [dbo].[SP_Insert_Update_PerformanceLog]
            @ActionName = @ActionName,
            @ComponentName = @ComponentName,
            @CreatedBy = @CreatedBy,
            @CreatedOn = @CreatedOn,
            @Duration = @Duration,
            @EndTime = @EndTime,
            @PerformanceLogID = @PerformanceLogID,
            @RoleID = @RoleID,
            @SessionID = @SessionID,
            @StartTime = @StartTime,
            @UserID = @UserID",
        new SqlParameter("@ActionName", apiRequestAndPerformanceLogRequest.ActionName),
        new SqlParameter("@ComponentName", apiRequestAndPerformanceLogRequest.ComponentName),
        new SqlParameter("@CreatedBy", apiRequestAndPerformanceLogModel.CreatedBy),
        new SqlParameter("@CreatedOn", apiRequestAndPerformanceLogModel.CreatedOn),
        new SqlParameter("@Duration", apiRequestAndPerformanceLogModel.Duration),
        new SqlParameter("@EndTime", apiRequestAndPerformanceLogRequest.ResponseTimeStamp),
        new SqlParameter("@PerformanceLogID", 0),
        new SqlParameter("@RoleID", apiRequestAndPerformanceLogModel.RoleID),
        new SqlParameter("@SessionID", apiRequestAndPerformanceLogModel.SessionID),
        new SqlParameter("@StartTime", apiRequestAndPerformanceLogRequest.RequestTimeStamp),
        new SqlParameter("@UserID", apiRequestAndPerformanceLogModel.UserID)
    );

    if (performanceLog == 0)
        return SabicConstants.BadRequestMessage;

    return SabicConstants.SuccessMessage;
}
