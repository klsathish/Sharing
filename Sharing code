 public class WCIDbContext : DbContext
 {
     public WCIDbContext(DbContextOptions<WCIDbContext> options) : base(options) { }
     public virtual DbSet<User> User { get; set; }
     public virtual DbSet<UserMenu> UserMenu { get; set; }
     public virtual DbSet<UserAuth> UserAuth { get; set; }
     public virtual DbSet<BaseFilterResult> BaseFilterResult { get; set; }
     public virtual DbSet<MoreFiltersSBUandBUResult> MoreFiltersSBUandBUResult { get; set; }
     public virtual DbSet<MoreFiltersProfitCenterResult> MoreFiltersProfitCenterResult { get; set; }
     public virtual DbSet<MoreFiltersPlantResult> MoreFiltersPlantResult { get; set; }
------------------------
 protected override void OnModelCreating(ModelBuilder modelBuilder)
 {
     modelBuilder.ApplyConfigurationsFromAssembly(typeof(WCIDbContext).Assembly);
     modelBuilder.Entity<User>(eb => { eb.HasNoKey(); });
     modelBuilder.Entity<UserMenuAccessModel>(eb => { eb.HasNoKey(); });
     modelBuilder.Entity<UserMenu>(eb => { eb.HasNoKey(); });
     modelBuilder.Entity<UserAuth>(eb => { eb.HasNoKey(); });
     modelBuilder.Entity<UserDetails>(eb => { eb.HasNoKey(); });
     modelBuilder.Entity<BaseFilterResult>(eb => { eb.HasNoKey(); });
     modelBuilder.Entity<MoreFiltersSBUandBUResult>(eb => { eb.HasNoKey(); });
     modelBuilder.Entity<MoreFiltersProfitCenterResult>(eb => { eb.HasNoKey(); });
     modelBuilder.Entity<MoreFiltersPlantResult>(eb => { eb.HasNoKey(); });
----------------------------------------
    public class UserManagementRepository : IUserManagementRepository
    {
        private readonly WCIDbContext _dbContext;
        private readonly CommonDbContext _commonDbContext;
        public UserManagementRepository(WCIDbContext dbContext, CommonDbContext commonDbContext)
        {
            _dbContext = dbContext;
            _commonDbContext = commonDbContext;
        }
        public async Task<List<UserAuth>> IsAuthenticationUser(string userName)
        {
            return await _dbContext.UserAuth
                .FromSqlRaw("EXEC [dbo].[SP_IsInternal_AuthenticatedUser] @UserName",
                    new SqlParameter("@UserName", userName))
                .ToListAsync();
        }

        public async Task<List<UserMenu>> GetUserMenuList(int? userId, int? roleId)
        {
            return await _dbContext.UserMenu
                .FromSqlRaw("EXEC [dbo].[SP_GetUserMenus] @UserID, @RoleID",
                    new SqlParameter("@UserID", userId ?? (object)DBNull.Value),
                    new SqlParameter("@RoleID", roleId ?? (object)DBNull.Value))
                .ToListAsync();
        }

        public async Task<List<User>> GetUserList()
        {
            return await _dbContext.User
                .FromSqlRaw("EXEC [dbo].[SP_GetUsers]")
                .ToListAsync();
        }

        public async Task<InsertUpdateUserRes> InsertUpdateUserReq(InsertUpdateUserReq req)
        {
            var parameters = new[]
            {
                new SqlParameter("@UserID", req.UserID),
                new SqlParameter("@UserRoleIDs", req.UserRoleIDs ?? string.Empty),
                new SqlParameter("@UserName", req.UserName ?? string.Empty),
                new SqlParameter("@Email", req.Email ?? string.Empty),
                new SqlParameter("@FirstName", req.FirstName ?? string.Empty),
                new SqlParameter("@LastName", req.LastName ?? string.Empty),
                new SqlParameter("@EmployeeID", req.EmployeeID ?? string.Empty),
                new SqlParameter("@AffiliateID", req.AffiliateID),
                new SqlParameter("@StatusID", req.StatusID),
                new SqlParameter("@CreatedBy", req.CreatedBy),
                new SqlParameter("@IsInsert", req.IsInsert)
            };

            var result = _dbContext.Database.SqlQueryRaw<string>(
                "EXEC dbo.SP_Insert_Update_AssignedUser @UserID, @UserRoleIDs, @UserName, @Email, @FirstName, @LastName, @EmployeeID, @AffiliateID, @StatusID, @CreatedBy, @IsInsert",
                parameters)
                .AsEnumerable()
                .FirstOrDefault();

            return new InsertUpdateUserRes { Message = result ?? string.Empty };
        }

        public async Task<string> DeactivateUserReq(DeactivateUserReq req)
        {
            var response = await _dbContext.Database.ExecuteSqlRawAsync(
                "EXEC dbo.SP_Update_User_IsActivated @UserID, @IsActivated, @UpdatedBy",
                new SqlParameter("@UserID", req.UserID),
                new SqlParameter("@IsActivated", req.IsActivated),
                new SqlParameter("@UpdatedBy", req.UpdatedBy)
            );

            return response == 0 ? SabicConstants.RecordNotFoundMessage : SabicConstants.SuccessMessage;
        }

        public async Task<List<SearchUser>> GetSearchUserListFromAD(string searchText)
        {
            var searchUsers = new List<SearchUser>();

            if (!string.IsNullOrWhiteSpace(searchText) && searchText.Length > 3)
            {
                var lstSearchUserFromCommonDb = await _commonDbContext.MST_UserDetails_Infopoint
                    .Where(x =>
                        (x.DomainLoginID ?? "").Replace("SABICCORP\\", "").ToLower().Contains(searchText.ToLower().Trim()) ||
                        (x.Email ?? "").ToLower().Contains(searchText.ToLower().Trim()) ||
                        (x.EmployeeName ?? "").ToLower().Contains(searchText.ToLower().Trim()))
                    .ToListAsync();

                searchUsers.AddRange(lstSearchUserFromCommonDb.Select(item => new SearchUser
                {
                    EmployeeID = Convert.ToString(item.EmployeeID),
                    LoginName = item.DomainLoginID!.Replace("SABIC\\", "SABICCORP\\"),
                    FirstName = item.FirstName!,
                    LastName = item.LastName!,
                    UserName = item.FirstName + " " + item.LastName,
                    Email = item.Email!
                }));
            }

            return searchUsers;
        }

        public async Task<List<Role>> GetRoleList()
        {
            return await _dbContext.Roles
                .FromSqlRaw("EXEC [dbo].[SP_GetRole]")
                .ToListAsync();
        }

        public async Task<List<Affiliate>> GetAffiliateList()
        {
            return await _dbContext.Affiliates
                .FromSqlRaw("EXEC [dbo].[SP_GetAffiliateForUserManagement]")
                .ToListAsync();
        }

        public async Task<UserMenuAccessModel> IsAuthorizedUserMenu(UserNameWithMenu req)
        {
            var res = await _dbContext.UserMenuAccessModel
                .FromSqlRaw("EXEC dbo.SP_CheckUserMenuAccess @UserID, @MenuID",
                    new SqlParameter("@UserID", req.UserID!),
                    new SqlParameter("@MenuID", req.MenuID))
                .ToListAsync();

            return res.FirstOrDefault()!;
        }
    }
}
---------------------------------------------
  public class UserManagementService : IUserManagementService
  {
      private readonly IUserManagementRepository _userManagementRepository;
      public UserManagementService(IUserManagementRepository userManagementRepository)
      {
          _userManagementRepository = userManagementRepository;
      }
      public async Task<UserAuthenticationModel> GetUserAuthenticationReq(string userName)
      {
          var result = await _userManagementRepository.IsAuthenticationUser(userName);
          var (message, code) = CommonMethod.GetStatus(result?.Count ?? 0);

          return new UserAuthenticationModel
          {
              StatusMessage = message,
              StatusCode = code,
              UserAuth = result?.FirstOrDefault()
          };
      }

      public async Task<UserMenuModel> GetUserMenuList(int userId, int roleId)
      {
          UserMenuModel userMenuModel = new UserMenuModel();
          var userMenus = await _userManagementRepository.GetUserMenuList(userId, roleId);

          if (userMenus.Count > 0)
          {
              userMenuModel.StatusMessage = SabicConstants.SuccessMessage;
              userMenuModel.StatusCode = SabicConstants.SuccessStatusCode;
              userMenuModel.UserMenus = userMenus;
          }
          else
          {
              userMenuModel.StatusMessage = SabicConstants.RecordNotFoundMessage;
              userMenuModel.StatusCode = SabicConstants.RecordNotFoundStatusCode;
          }
          return userMenuModel;

-------------------------
 [Route("api/userManagement")]
 [ApiController]
 public class UserManagementController : BaseController
 {
     private readonly IUserManagementService _userManagementService;
     public UserManagementController(IUserManagementService userManagementService)
     {
         _userManagementService = userManagementService;
     }
     [HttpGet("getUserList")]

     public async Task<IActionResult> GetUserList()
     {
         UserListModel userModel = await _userManagementService.GetUserList();
         return StatusCode(userModel.StatusCode, userModel);
     }

     [HttpGet("getUserMenuList")]

     public async Task<IActionResult> GetUserMenuList(int userId, int roleId)
     {

         UserMenuModel userMenuModel = await _userManagementService.GetUserMenuList(userId, roleId);
         return StatusCode(userMenuModel.StatusCode, userMenuModel);
     }
